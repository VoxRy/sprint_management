<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <record id="view_project_sprint_close_wizard_form" model="ir.ui.view">
    <field name="name">project.sprint.close.wizard.form</field>
    <field name="model">project.sprint.close.wizard</field>
    <field name="arch" type="xml">
      <form string="Close Sprint">
        <group>
          <field name="sprint_id" readonly="1"/>
          <field name="project_id" invisible="1"/>
          <field name="incomplete_task_count" readonly="1"/>
        </group>

        <group string="What would you like to do with incomplete tasks?" colspan="4">
          <field name="action_type" widget="radio" options="{'horizontal': true}"/>

          <field name="next_sprint_id"
                 attrs="{'invisible':[('action_type','!=','move')],
                         'required':[('action_type','=','move')]}"
                 options="{'no_create': True}"
                 domain="[('project_id','=',project_id),('state','in',['waiting','active']),('id','!=',sprint_id)]"/>
        </group>

        <group string="Incomplete Tasks" attrs="{'invisible':[('incomplete_task_count','=',0)]}" colspan="4">
          <field name="incomplete_task_ids" nolabel="1" readonly="1">
            <tree>
              <field name="name"/>
              <field name="epic_id"/>
              <field name="user_ids" widget="many2many_tags"/>
              <field name="stage_id"/>
            </tree>
          </field>
        </group>

        <footer>
          <button string="Close Sprint" name="action_close_sprint" type="object" class="btn-primary"/>
          <button string="Cancel" class="btn-secondary" special="cancel"/>
        </footer>
      </form>
    </field>
  </record>

</odoo>
